<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <title>Jellyfin - ReDoc</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
    </style>
  </head>

  <body>
    <div id="api-doc"></div>
    <script src="https://cdn.jsdelivr.net/npm/redoc@next/bundles/redoc.standalone.js"></script>
    <script>
      var spec = '/openapi/jellyfin-openapi-stable.json';
      if (new URLSearchParams(window.location.search).get('version')) {
        const version = new URLSearchParams(window.location.search).get('version');
        if (version === "unstable") {
          spec = '/openapi/jellyfin-openapi-unstable.json';
        } else {
          var directory = "unstable";
          if (/^10\..*/.test(version)) {
            directory = "stable";
          }
          spec = `/openapi/${directory}/jellyfin-openapi-${version}.json`; // use ${version} in the string where you need the version
        }
      }

      console.log("Fetching API specification document " + spec);
      Redoc.init(spec, {}, document.getElementById('api-doc'));
    </script>
  </body>

</html>
